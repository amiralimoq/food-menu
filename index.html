window.sendOrder = function() {
                const total = calculateTotal();
                const orderData = {
                    items: cart,
                    total_price: total
                };
                tg.sendData(JSON.stringify(orderData));
            };

            function calculateTotal() {
                let total = 0;
                for (const [id, count] of Object.entries(cart)) {
                    const item = menu.find(i => i.id == id);
                    total += item.price * count;
                }
                return total;
            }

            // اتصال دکمه اصلی تلگرام به تابع ارسال
            tg.MainButton.onClick(window.sendOrder);
        });
    </script>
</body>
</html>
